___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "TikTok pixel",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Tag to implement TikTok pixel (needs an additional custom html tag to be used with multiple pixels)",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "pixelId",
    "displayName": "TikTok pixel ID(s) separated by comma",
    "simpleValueType": true,
    "help": "Insert one or more TikTok pixel IDs (separated by comma)",
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "eventName",
    "displayName": "Event name",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "manual",
        "displayValue": "Manual"
      },
      {
        "value": "PageView",
        "displayValue": "PageView"
      },
      {
        "value": "ViewContent",
        "displayValue": "ViewContent"
      },
      {
        "value": "ClickButton",
        "displayValue": "ClickButton"
      },
      {
        "value": "Search",
        "displayValue": "Search"
      },
      {
        "value": "AddToWishlist",
        "displayValue": "AddToWishlist"
      },
      {
        "value": "AddToCart",
        "displayValue": "AddToCart"
      },
      {
        "value": "InitiateCheckout",
        "displayValue": "InitiateCheckout"
      },
      {
        "value": "AddPaymentInfo",
        "displayValue": "AddPaymentInfo"
      },
      {
        "value": "CompletePayment",
        "displayValue": "CompletePayment"
      },
      {
        "value": "PlaceAnOrder",
        "displayValue": "PlaceAnOrder"
      },
      {
        "value": "Contact",
        "displayValue": "Contact"
      },
      {
        "value": "Download",
        "displayValue": "Download"
      },
      {
        "value": "SubmitForm",
        "displayValue": "SubmitForm"
      },
      {
        "value": "CompleteRegistration",
        "displayValue": "CompleteRegistration"
      },
      {
        "value": "Subscribe",
        "displayValue": "Subscribe"
      }
    ],
    "simpleValueType": true,
    "help": "Use standard event names or select \"manual\" to create custom events or use a variable",
    "defaultValue": "PageView",
    "alwaysInSummary": true
  },
  {
    "type": "TEXT",
    "name": "eventNameVar",
    "displayName": "Custom event name",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "eventName",
        "paramValue": "manual",
        "type": "EQUALS"
      }
    ],
    "alwaysInSummary": true
  },
  {
    "type": "SELECT",
    "name": "eventParameters",
    "displayName": "Event parameters",
    "macrosInSelect": true,
    "selectItems": [
      {
        "value": "none",
        "displayValue": "None"
      },
      {
        "value": "manual",
        "displayValue": "Manual"
      }
    ],
    "simpleValueType": true,
    "help": "The event parameters can be passed using a variable. Set this field as \"Manual\" if you want to pass parameters manually. Leave it as \"None\" if no parameter is needed."
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "parametersTable",
    "displayName": "Parameters table",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Parameter",
        "name": "param",
        "type": "TEXT",
        "isUnique": true
      },
      {
        "defaultValue": "",
        "displayName": "Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "help": "Manually insert the parameters as rows of this table",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "eventParameters",
        "paramValue": "manual",
        "type": "EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const callInWindow = require('callInWindow');
const injectScript = require('injectScript');
const setInWindow = require('setInWindow');
const copyFromWindow = require('copyFromWindow');
const encodeUriComponent = require('encodeUriComponent');
const isConsentGranted = require('isConsentGranted');
const addConsentListener = require('addConsentListener');

log('TikTok| data =', data);

// if there is no pixel, end with failure
if (!data.pixelId){
  log('ERROR: no pixel id found.');
  data.gtmOnFailure();
}

// Getting the init pixels, if any
let pixels = copyFromWindow('ttq._i');
log('TikTok| pixels:',pixels);

// Getting the pixels added as input
let tag_pixels = data.pixelId.split(',');
log('TikTok| tag_pixels:',tag_pixels);

// Declaring event name and parameters
let eventName = (data.eventName=='manual' ? data.eventNameVar : data.eventName);
let eventParams = data.eventParameters;
if (eventParams=='manual'){
  eventParams = {};
  data.parametersTable.forEach(function(pair){
    eventParams[pair.param] = pair.value;
  });
} else if(eventParams=='none'){
  eventParams = null;
}
log('TikTok| eventName:',eventName);
log('TikTok| eventParams:',eventParams);

// function to actually track de event for a pixel
const trackEvent = function(thisPixelId,init){
  if (tag_pixels.length == 1){
    if (eventName=='PageView'){
      if (init){ // library load includes pageview so send pageview manually only if pixel is already loaded
        callInWindow('ttq.page');
        log('TikTok| tracking '+eventName+' for '+thisPixelId);
      }
    } else {
      if (eventParams){
        callInWindow('ttq.track', eventName, eventParams);
        log('TikTok| tracking '+eventName+' for '+thisPixelId+' with params:', eventParams);
      } else {
        callInWindow('ttq.track', eventName);
        log('TikTok| tracking '+eventName+' for '+thisPixelId);
      }
    }
  } else {
    if (init || (!init && eventName != 'PageView')){
      let thisPixelId_index = tag_pixels.indexOf(thisPixelId);
      let result = callInWindow('ttqInstance',{'eventName':eventName,'eventParams':eventParams,'pixelId':thisPixelId});
      log('TikTok| '+(result ? eventName+' tracked successfully for '+thisPixelId : 'Could not track '+eventName+' for '+thisPixelId));
    }
  }
};

// iterates through each pixel Id, checks if already loaded and trackEvent
const sendEvent = () => {
  tag_pixels.forEach(function(thisPixelId) {
    if (!pixels || !pixels[thisPixelId] || !pixels[thisPixelId]._init){
      log('TikTok| '+thisPixelId+' not loaded yet.');
      let url="https://analytics.tiktok.com/i18n/pixel/sdk.js"; // base library
      url += "?sdkid="+encodeUriComponent(thisPixelId); // adding pixel ID
      // trackEvent has to be wrapped as injectScript is not compatible with function arguments
      injectScript(url,function(){trackEvent(thisPixelId,false);},data.gtmOnFailure);
    } else {
      log('TikTok| '+thisPixelId+' is already loaded.');
      trackEvent(thisPixelId,true);
    }
  });
};

let sent = false;
if (isConsentGranted('ad_storage')){
  sendEvent();
  sent = true;
} else {
  addConsentListener('ad_storage', (consentType, granted) => {
    if (granted && !sent){
      sendEvent();
      sent = true;
    }
  });
}

data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ttq._i"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ttqInstance"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ttq.track"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ttq.page"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://analytics.tiktok.com/i18n/pixel/sdk.js?sdkid\u003d*"
              },
              {
                "type": 1,
                "string": "https://analytics.tiktok.com/i18n/pixel/events.js?sdkid\u003d*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Quick Test
  code: runCode();
setup: ''


___NOTES___

Created on 18/8/2022, 10:43:17


